# 同步版本
python3 -m sync/benchmark.py

# 非同步版本
python3 async/benchmark_async.py



非同步效能測試程式 `benchmark_async.py` 中輸出的是這四個統計指標：

```python
print(f"min = {min(valid_times):.4f}")
print(f"max = {max(valid_times):.4f}")
print(f"avg = {statistics.mean(valid_times):.4f}")
print(f"std = {statistics.stdev(valid_times):.4f}")
```

這些指標是針對 **推論延遲（inference_time）** 統計出來的，意義如下：

---

## 指標解釋（針對每次 gRPC 呼叫的耗時）

| 指標 | 全名 | 意思 | 舉例 |
|------|------|------|------|
| `min` | 最小推論時間 | 所有請求中耗時**最短**的一筆 | 例如最快只花 0.02 秒 |
| `max` | 最大推論時間 | 所有請求中耗時**最長**的一筆 | 例如最慢花了 0.98 秒 |
| `avg` | 平均推論時間 | 所有請求的**平均延遲** | 例如平均花 0.35 秒 |
| `std` | 標準差（Standard Deviation） | 推論延遲的「**穩定程度**」 | 數值越小表示越穩定，越大表示延遲抖動嚴重 |

---

### 更直觀一點的解釋：

- `min` 是 **最順的狀況**
- `max` 是 **最卡的狀況**
- `avg` 是 **整體平均狀況**
- `std` 是 **穩不穩定的指標**

---

## 用途說明

| 指標 | 實務用途 |
|------|----------|
| `min` | 可以看出你的模型/系統理論上最快能多快回應 |
| `max` | 可以偵測出有沒有 timeout、卡住或系統負載過重的問題 |
| `avg` | 作為系統整體效能的 benchmark |
| `std` | 若太大，代表系統延遲不穩、併發控制不足或資源飽和 |

---

### 範例

如果你測出：

```
min = 0.12
max = 1.22
avg = 0.43
std = 0.25
```

代表：

- 最快的回應只花了 0.12 秒
- 有一筆請求花到 1.22 秒，很慢（可能有資源瓶頸）
- 平均每筆推論約 0.43 秒
- 標準差 0.25，說明延遲波動滿大的（不是很穩）

---

如果你希望我幫你：

- 繪製這四個指標的圖（例如 `avg/std 隨併發變化圖`）
- 自動產出多組測試組合（如不同併發數、QPS）

我可以幫你加個批量測試器或畫統計圖。需要的話你只要說一聲。